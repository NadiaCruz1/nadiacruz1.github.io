<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador Ecuaci√≥n de Bernoulli - Sustentaci√≥n</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(to bottom, #87CEEB 0%, #E0F6FF 50%, #B0E0E6 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .simulator-container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            grid-template-rows: auto auto auto;
            gap: 20px;
            padding: 20px;
        }
        
        .visualization-column {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .controls-panel {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
        }
        .controls-panel h3 {
            color: #1e3c72;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.2rem;
        }
        
        .control-group {
            margin: 20px 0;
            padding: 15px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .control-label {
            font-weight: bold;
            color: #1e3c72;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .dynamic-value {
            background: #e8f2ff;
            padding: 4px 8px;
            border-radius: 6px;
            color: #2a5298;
            font-weight: bold;
            min-width: 80px;
            text-align: center;
        }
        
        .slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #e0e0e0;
            outline: none;
            -webkit-appearance: none;
            margin: 10px 0;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
            transition: all 0.2s ease;
        }
        
        .slider::-webkit-slider-thumb:hover {
            background: #5a67d8;
            transform: scale(1.1);
        }
        
        .slider-range {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: #666;
            margin-top: 5px;
        }
        
        .visualization-area {
            background: linear-gradient(to bottom, #87CEEB 0%, #E0F6FF 50%, #B0E0E6 100%);
            border-radius: 10px;
            position: relative;
            height: 500px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .wing-container {
            position: relative;
            width: 100%;
            height: 100%;
        }
        
        .wing-svg {
            width: 100%;
            height: 100%;
        }
        
        .wing-upper {
            fill: #4a5568;
            stroke: #2d3748;
            stroke-width: 3;
            transition: all 0.3s ease;
        }
        
        .wing-lower {
            fill: #4a5568;
            stroke: #2d3748;
            stroke-width: 3;
            transition: all 0.3s ease;
        }
        
        .pressure-zone-upper {
            fill: rgba(255, 71, 87, 0.6);
            transition: all 0.3s ease;
        }
        
        .pressure-zone-lower {
            fill: rgba(46, 213, 115, 0.6);
            transition: all 0.3s ease;
        }
        
        .lift-arrow {
            stroke: #ff6b6b;
            stroke-width: 8;
            fill: none;
            marker-end: url(#arrowhead);
            transition: all 0.3s ease;
        }
        
        .flow-line-upper {
            stroke: #ff4757;
            stroke-width: 3;
            fill: none;
            stroke-dasharray: 10,5;
            animation: flowFast 1s linear infinite;
        }
        
        .flow-line-lower {
            stroke: #2ed573;
            stroke-width: 3;
            fill: none;
            stroke-dasharray: 10,5;
            animation: flowSlow 2s linear infinite;
        }
        
        @keyframes flowFast {
            0% { stroke-dashoffset: 0; }
            100% { stroke-dashoffset: -30; }
        }
        
        @keyframes flowSlow {
            0% { stroke-dashoffset: 0; }
            100% { stroke-dashoffset: -30; }
        }
        
        .bernoulli-panel {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
        }
        
        .bernoulli-panel h3 {
            color: #1e3c72;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .equation-box {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .equation-title {
            font-weight: bold;
            color: #1e3c72;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .equation-formula {
            font-family: 'Times New Roman', serif;
            font-size: 1.2rem;
            color: #333;
            line-height: 1.4;
            margin: 10px 0;
        }
        
        .explanation {
            font-size: 0.9rem;
            color: #666;
            line-height: 1.3;
        }
        
        .explanation-panel {
            background: linear-gradient(135deg, #ff6b6b 0%, #ffa726 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3);
            transition: all 0.3s ease;
        }
        
        .explanation-title {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .explanation-content {
            font-size: 0.95rem;
            line-height: 1.4;
            background: rgba(255,255,255,0.1);
            padding: 12px;
            border-radius: 8px;
            border-left: 4px solid rgba(255,255,255,0.5);
        }
        
        .calculation-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }
        
        .calc-title {
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .calc-item {
            background: rgba(255,255,255,0.1);
            padding: 8px;
            border-radius: 6px;
            margin: 8px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .calc-label {
            font-size: 0.9rem;
        }
        
        .calc-value {
            font-weight: bold;
            color: #ffd700;
        }
        
        .lift-result {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin-top: 15px;
            border: 2px solid rgba(255,255,255,0.3);
        }
        
        .lift-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #ffd700;
            margin: 10px 0;
        }
        
        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
                grid-template-rows: auto auto auto;
            }
            
            .visualization-area {
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="simulator-container">
        <div class="header">
            üìê Ecuaci√≥n de Bernoulli - Sustentaci√≥n del Avi√≥n
        </div>
        
        <div class="main-content">
            <div class="controls-panel">
                <h3>üéõÔ∏è Controles</h3>
                
                <div class="control-group">
                    <div class="control-label">
                        <span>Velocidad Base (v)</span>
                        <span class="dynamic-value" id="velocityDisplay">50 m/s</span>
                    </div>
                    <input type="range" class="slider" id="velocitySlider" 
                           min="0" max="100" value="50" step="5">
                    <div class="slider-range">
                        <span>0 m/s</span>
                        <span>100 m/s</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <div class="control-label">
                        <span>Densidad (œÅ)</span>
                        <span class="dynamic-value" id="densityDisplay">1.225 kg/m¬≥</span>
                    </div>
                    <input type="range" class="slider" id="densitySlider" 
                           min="0" max="2" value="1.225" step="0.025">
                    <div class="slider-range">
                        <span>0 kg/m¬≥</span>
                        <span>2 kg/m¬≥</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <div class="control-label">
                        <span>Presi√≥n Base (P‚ÇÄ)</span>
                        <span class="dynamic-value" id="pressureDisplay">101325 Pa</span>
                    </div>
                    <input type="range" class="slider" id="pressureSlider" 
                           min="0" max="150000" value="101325" step="1000">
                    <div class="slider-range">
                        <span>0 Pa</span>
                        <span>150000 Pa</span>
                    </div>
                </div>
                
                <div class="equation-box">
                    <div class="equation-title">üí° Concepto Clave</div>
                    <div class="explanation">
                        <strong>Bernoulli dice:</strong><br>
                        M√°s velocidad ‚Üí Menos presi√≥n<br><br>
                        <strong>En el ala:</strong><br>
                        ‚Ä¢ Arriba: flujo r√°pido = baja presi√≥n<br>
                        ‚Ä¢ Abajo: flujo lento = alta presi√≥n<br>
                        ‚Ä¢ Diferencia = sustentaci√≥n ‚¨ÜÔ∏è<br><br>
                        <strong>La densidad (œÅ) afecta:</strong><br>
                        ‚Ä¢ M√°s densa ‚Üí M√°s efecto de velocidad<br>
                        ‚Ä¢ Menos densa ‚Üí Menos efecto de velocidad
                    </div>
                </div>
                

            </div>
            
            <div class="visualization-column">
                <div class="visualization-area">
                    <div class="wing-container">
                        <svg class="wing-svg" viewBox="0 0 500 400">
                            <defs>
                                <marker id="arrowhead" markerWidth="12" markerHeight="8" 
                                        refX="11" refY="4" orient="auto">
                                    <polygon points="0 0, 12 4, 0 8" fill="#ff6b6b"/>
                                </marker>
                            </defs>
                            
                            <!-- L√≠neas de flujo superiores (r√°pidas) -->
                            <path class="flow-line-upper" d="M 0 120 Q 150 80, 250 90 Q 400 85, 500 120" id="flowUpper1"/>
                            <path class="flow-line-upper" d="M 0 130 Q 150 95, 250 100 Q 400 95, 500 130" id="flowUpper2"/>
                            <path class="flow-line-upper" d="M 0 140 Q 150 110, 250 115 Q 400 110, 500 140" id="flowUpper3"/>
                            
                            <!-- L√≠neas de flujo inferiores (lentas) -->
                            <path class="flow-line-lower" d="M 0 260 Q 150 270, 250 275 Q 400 270, 500 260" id="flowLower1"/>
                            <path class="flow-line-lower" d="M 0 270 Q 150 280, 250 285 Q 400 280, 500 270" id="flowLower2"/>
                            <path class="flow-line-lower" d="M 0 280 Q 150 290, 250 295 Q 400 290, 500 280" id="flowLower3"/>
                            
                            <!-- Zonas de presi√≥n -->
                            <ellipse class="pressure-zone-upper" cx="250" cy="150" rx="180" ry="40" id="upperPressure"/>
                            <ellipse class="pressure-zone-lower" cx="250" cy="250" rx="180" ry="40" id="lowerPressure"/>
                            
                            <!-- AVI√ìN COMPLETO -->
                            <g id="airplaneGroup">
                                <!-- Fuselaje principal -->
                                <ellipse cx="250" cy="200" rx="120" ry="18" fill="#4a5568" stroke="#2d3748" stroke-width="3"/>
                                
                                <!-- Ala principal (forma aerodin√°mica) -->
                                <!-- Parte superior curva -->
                                <path class="wing-upper" d="M 130 200 Q 200 160, 280 175 Q 320 180, 370 200" fill="#5a67d8" stroke="#4c51bf" stroke-width="2"/>
                                
                                <!-- Parte inferior m√°s plana -->
                                <path class="wing-lower" d="M 130 200 Q 200 210, 280 208 Q 320 205, 370 200" fill="#5a67d8" stroke="#4c51bf" stroke-width="2"/>
                                
                                <!-- Conectar el ala -->
                                <line x1="130" y1="200" x2="130" y2="200" stroke="#4c51bf" stroke-width="3"/>
                                <line x1="370" y1="200" x2="370" y2="200" stroke="#4c51bf" stroke-width="3"/>
                                
                                <!-- Alas laterales -->
                                <ellipse cx="180" cy="200" rx="50" ry="8" fill="#667eea" stroke="#5a67d8" stroke-width="2"/>
                                <ellipse cx="320" cy="200" rx="50" ry="8" fill="#667eea" stroke="#5a67d8" stroke-width="2"/>
                                
                                <!-- Cola del avi√≥n -->
                                <ellipse cx="130" cy="200" rx="25" ry="12" fill="#4a5568" stroke="#2d3748" stroke-width="2"/>
                                
                                <!-- Estabilizador horizontal -->
                                <ellipse cx="120" cy="200" rx="20" ry="6" fill="#5a67d8" stroke="#4c51bf" stroke-width="2"/>
                                
                                <!-- Estabilizador vertical -->
                                <ellipse cx="120" cy="185" rx="6" ry="15" fill="#5a67d8" stroke="#4c51bf" stroke-width="2"/>
                                
                                <!-- Nariz del avi√≥n -->
                                <ellipse cx="370" cy="200" rx="12" ry="10" fill="#2d3748" stroke="#1a202c" stroke-width="2"/>
                                
                                <!-- H√©lice -->
                                <line x1="382" y1="200" x2="395" y2="200" stroke="#ff6b6b" stroke-width="5"/>
                                <line x1="388.5" y1="190" x2="388.5" y2="210" stroke="#ff6b6b" stroke-width="4"/>
                                
                                <!-- Ventanas del avi√≥n -->
                                <circle cx="300" cy="195" r="5" fill="#87ceeb" stroke="#4682b4" stroke-width="1"/>
                                <circle cx="280" cy="195" r="5" fill="#87ceeb" stroke="#4682b4" stroke-width="1"/>
                                <circle cx="260" cy="195" r="5" fill="#87ceeb" stroke="#4682b4" stroke-width="1"/>
                                <circle cx="240" cy="195" r="5" fill="#87ceeb" stroke="#4682b4" stroke-width="1"/>
                            </g>
                            
                            <!-- Flecha de sustentaci√≥n -->
                            <line class="lift-arrow" id="liftArrow" x1="250" y1="280" x2="250" y2="120"/>
                            
                            <!-- Etiquetas de velocidad -->
                            <text x="50" y="100" fill="#ff4757" font-weight="bold" font-size="14">Flujo R√ÅPIDO</text>
                            <text x="50" y="115" fill="#ff4757" font-weight="bold" font-size="12" id="upperVelocity">v = 65 m/s</text>
                            
                            <text x="50" y="320" fill="#2ed573" font-weight="bold" font-size="14">Flujo LENTO</text>
                            <text x="50" y="335" fill="#2ed573" font-weight="bold" font-size="12" id="lowerVelocity">v = 50 m/s</text>
                            
                            <!-- Etiquetas de presi√≥n -->
                            <text x="350" y="140" fill="#ff4757" font-weight="bold" font-size="12">BAJA PRESI√ìN</text>
                            <text x="350" y="155" fill="#ff4757" font-weight="bold" font-size="11" id="upperPressureText">P = 98,000 Pa</text>
                            
                            <text x="350" y="270" fill="#2ed573" font-weight="bold" font-size="12">ALTA PRESI√ìN</text>
                            <text x="350" y="285" fill="#2ed573" font-weight="bold" font-size="11" id="lowerPressureText">P = 101,325 Pa</text>
                            
                            <!-- Etiqueta de sustentaci√≥n -->
                            <text x="260" y="110" fill="#ff6b6b" font-weight="bold" font-size="14">SUSTENTACI√ìN</text>
                            <text x="270" y="125" fill="#ff6b6b" font-weight="bold" font-size="11" id="liftForceText">F = 6,650 N</text>
                        </svg>
                    </div>
                </div>
                
                <div class="explanation-panel" id="explanationPanel">
                    <div class="explanation-title">üîç ¬øQu√© est√° pasando?</div>
                    <div class="explanation-content" id="explanationContent">
                        Ajusta los controles para ver explicaciones autom√°ticas de los cambios en la f√≠sica.
                    </div>
                </div>
            </div>
            
            <div class="bernoulli-panel">
                <h3>üìê Ecuaci√≥n de Bernoulli</h3>
                
                <div class="equation-box">
                    <div class="equation-title">Ecuaci√≥n Base</div>
                    <div class="equation-formula">
                        P + ¬ΩœÅv¬≤ = constante
                    </div>
                    <div class="explanation">
                        <strong>P</strong> = presi√≥n que "empuja" el fluido<br>
                        <strong>¬ΩœÅv¬≤</strong> = "fuerza" creada por la velocidad
                    </div>
                </div>
                
                <div class="calculation-box">
                    <div class="calc-title">üî∫ C√°lculos ARRIBA del Ala</div>
                    <div class="calc-item">
                        <span class="calc-label">Velocidad (v):</span>
                        <span class="calc-value" id="calcUpperV">65 m/s</span>
                    </div>
                    <div class="calc-item">
                        <span class="calc-label">¬ΩœÅv¬≤:</span>
                        <span class="calc-value" id="calcUpperKinetic">2,588 Pa</span>
                    </div>
                    <div class="calc-item">
                        <span class="calc-label">Presi√≥n (P):</span>
                        <span class="calc-value" id="calcUpperP">98,737 Pa</span>
                    </div>
                </div>
                
                <div class="calculation-box">
                    <div class="calc-title">üîª C√°lculos ABAJO del Ala</div>
                    <div class="calc-item">
                        <span class="calc-label">Velocidad (v):</span>
                        <span class="calc-value" id="calcLowerV">50 m/s</span>
                    </div>
                    <div class="calc-item">
                        <span class="calc-label">¬ΩœÅv¬≤:</span>
                        <span class="calc-value" id="calcLowerKinetic">1,531 Pa</span>
                    </div>
                    <div class="calc-item">
                        <span class="calc-label">Presi√≥n (P):</span>
                        <span class="calc-value" id="calcLowerP">99,794 Pa</span>
                    </div>
                </div>
                
                <div class="lift-result">
                    <div>Diferencia de Presi√≥n</div>
                    <div class="lift-value" id="pressureDiff">1,057 Pa</div>
                    <div>Fuerza de Sustentaci√≥n</div>
                    <div class="lift-value" id="liftForce">2,114 N</div>
                    <div style="font-size: 0.9rem; opacity: 0.8;">
                        (√Årea del ala = 2 m¬≤)
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Variables de estado
        let params = {
            baseVelocity: 50,     // m/s
            density: 1.225,       // kg/m¬≥
            basePressure: 101325, // Pa
            wingArea: 2           // m¬≤ (√°rea del ala)
        };
        
        // Variables para detectar cambios
        let previousParams = {
            baseVelocity: 50,
            density: 1.225,
            basePressure: 101325
        };
        
        // Referencias DOM
        const sliders = {
            velocity: document.getElementById('velocitySlider'),
            density: document.getElementById('densitySlider'),
            pressure: document.getElementById('pressureSlider')
        };
        
        const displays = {
            velocity: document.getElementById('velocityDisplay'),
            density: document.getElementById('densityDisplay'),
            pressure: document.getElementById('pressureDisplay')
        };
        
        // Funci√≥n para generar explicaciones
        function generateExplanation() {
            const explanationContent = document.getElementById('explanationContent');
            let explanation = "";
            
            // Detectar qu√© cambi√≥
            if (params.baseVelocity !== previousParams.baseVelocity) {
                if (params.baseVelocity > previousParams.baseVelocity) {
                    explanation = `üöÄ <strong>Aumentaste la VELOCIDAD</strong> de ${previousParams.baseVelocity} a ${params.baseVelocity} m/s<br><br>
                    ‚úÖ <strong>Qu√© pasa:</strong><br>
                    ‚Ä¢ El aire se mueve m√°s r√°pido por arriba y abajo del ala<br>
                    ‚Ä¢ El t√©rmino ¬ΩœÅv¬≤ aumenta (m√°s energ√≠a cin√©tica)<br>
                    ‚Ä¢ Seg√∫n Bernoulli: m√°s velocidad = menos presi√≥n<br>
                    ‚Ä¢ La diferencia de presi√≥n aumenta<br>
                    ‚Ä¢ <strong>Resultado:</strong> M√ÅS sustentaci√≥n ‚¨ÜÔ∏è`;
                } else if (params.baseVelocity < previousParams.baseVelocity) {
                    explanation = `üêå <strong>Disminuiste la VELOCIDAD</strong> de ${previousParams.baseVelocity} a ${params.baseVelocity} m/s<br><br>
                    ‚úÖ <strong>Qu√© pasa:</strong><br>
                    ‚Ä¢ El aire se mueve m√°s lento por arriba y abajo del ala<br>
                    ‚Ä¢ El t√©rmino ¬ΩœÅv¬≤ disminuye (menos energ√≠a cin√©tica)<br>
                    ‚Ä¢ Seg√∫n Bernoulli: menos velocidad = m√°s presi√≥n<br>
                    ‚Ä¢ La diferencia de presi√≥n disminuye<br>
                    ‚Ä¢ <strong>Resultado:</strong> MENOS sustentaci√≥n ‚¨áÔ∏è`;
                }
            } else if (params.density !== previousParams.density) {
                if (params.density > previousParams.density) {
                    explanation = `üå™Ô∏è <strong>Aumentaste la DENSIDAD</strong> de ${previousParams.density.toFixed(3)} a ${params.density.toFixed(3)} kg/m¬≥<br><br>
                    ‚úÖ <strong>Qu√© pasa:</strong><br>
                    ‚Ä¢ El aire es m√°s "pesado" y denso<br>
                    ‚Ä¢ El t√©rmino ¬ΩœÅv¬≤ aumenta (œÅ es mayor)<br>
                    ‚Ä¢ El efecto de la velocidad se amplifica<br>
                    ‚Ä¢ La diferencia de presi√≥n aumenta<br>
                    ‚Ä¢ <strong>Resultado:</strong> M√ÅS sustentaci√≥n ‚¨ÜÔ∏è<br><br>
                    üí° <strong>En la vida real:</strong> Aire denso (nivel del mar) vs aire ligero (monta√±as altas)`;
                } else if (params.density < previousParams.density) {
                    explanation = `üí® <strong>Disminuiste la DENSIDAD</strong> de ${previousParams.density.toFixed(3)} a ${params.density.toFixed(3)} kg/m¬≥<br><br>
                    ‚úÖ <strong>Qu√© pasa:</strong><br>
                    ‚Ä¢ El aire es m√°s "ligero" y menos denso<br>
                    ‚Ä¢ El t√©rmino ¬ΩœÅv¬≤ disminuye (œÅ es menor)<br>
                    ‚Ä¢ El efecto de la velocidad se reduce<br>
                    ‚Ä¢ La diferencia de presi√≥n disminuye<br>
                    ‚Ä¢ <strong>Resultado:</strong> MENOS sustentaci√≥n ‚¨áÔ∏è<br><br>
                    üí° <strong>En la vida real:</strong> Por eso los aviones necesitan m√°s velocidad en altitudes altas`;
                }
            } else if (params.basePressure !== previousParams.basePressure) {
                if (params.basePressure > previousParams.basePressure) {
                    explanation = `üìà <strong>Aumentaste la PRESI√ìN BASE</strong> de ${previousParams.basePressure.toLocaleString()} a ${params.basePressure.toLocaleString()} Pa<br><br>
                    ‚úÖ <strong>Qu√© pasa:</strong><br>
                    ‚Ä¢ La presi√≥n atmosf√©rica de referencia es mayor<br>
                    ‚Ä¢ Todas las presiones (arriba y abajo) aumentan proporcionalmente<br>
                    ‚Ä¢ La diferencia relativa se mantiene similar<br>
                    ‚Ä¢ <strong>Resultado:</strong> Sustentaci√≥n similar pero en un ambiente de mayor presi√≥n<br><br>
                    üí° <strong>En la vida real:</strong> Diferencia entre nivel del mar y diferentes altitudes`;
                } else if (params.basePressure < previousParams.basePressure) {
                    explanation = `üìâ <strong>Disminuiste la PRESI√ìN BASE</strong> de ${previousParams.basePressure.toLocaleString()} a ${params.basePressure.toLocaleString()} Pa<br><br>
                    ‚úÖ <strong>Qu√© pasa:</strong><br>
                    ‚Ä¢ La presi√≥n atmosf√©rica de referencia es menor<br>
                    ‚Ä¢ Todas las presiones (arriba y abajo) disminuyen proporcionalmente<br>
                    ‚Ä¢ La diferencia relativa se mantiene similar<br>
                    ‚Ä¢ <strong>Resultado:</strong> Sustentaci√≥n similar pero en un ambiente de menor presi√≥n<br><br>
                    üí° <strong>En la vida real:</strong> Condiciones de gran altitud o clima de baja presi√≥n`;
                }
            }
            
            if (explanation) {
                explanationContent.innerHTML = explanation;
            }
            
            // Actualizar valores anteriores
            previousParams.baseVelocity = params.baseVelocity;
            previousParams.density = params.density;
            previousParams.basePressure = params.basePressure;
        }
        
        // Funci√≥n principal de actualizaci√≥n
        function updateSimulation() {
            // Obtener valores de los sliders (valores exactos, sin modificaciones)
            params.baseVelocity = parseFloat(sliders.velocity.value);
            params.density = parseFloat(sliders.density.value);
            params.basePressure = parseFloat(sliders.pressure.value);
            
            // Calcular velocidades del aire
            // Si no hay velocidad base, no hay flujo
            if (params.baseVelocity === 0) {
                var upperVelocity = 0;
                var lowerVelocity = 0;
            } else {
                // La densidad afecta c√≥mo el aire fluye alrededor del ala
                const densityFactor = params.density / 1.225; // Factor relativo a densidad est√°ndar
                
                // Arriba del ala: m√°s r√°pido debido a la curvatura + efecto de densidad
                var upperVelocity = params.baseVelocity * (1.3 + densityFactor * 0.2);
                // Abajo del ala: velocidad base + peque√±o efecto de densidad
                var lowerVelocity = params.baseVelocity * (1.0 + densityFactor * 0.1);
            }
            
            // Aplicar ecuaci√≥n de Bernoulli: P + ¬ΩœÅv¬≤ = constante
            const constant = params.basePressure + 0.5 * params.density * params.baseVelocity * params.baseVelocity;
            
            // Calcular t√©rminos cin√©ticos
            const upperKinetic = 0.5 * params.density * upperVelocity * upperVelocity;
            const lowerKinetic = 0.5 * params.density * lowerVelocity * lowerVelocity;
            
            // Calcular presiones usando Bernoulli
            const upperPressure = constant - upperKinetic;
            const lowerPressure = constant - lowerKinetic;
            
            // Calcular diferencia de presi√≥n y fuerza de sustentaci√≥n
            const pressureDifference = lowerPressure - upperPressure;
            const liftForce = pressureDifference * params.wingArea;
            
            // Actualizar displays de controles
            displays.velocity.textContent = params.baseVelocity + ' m/s';
            displays.density.textContent = params.density.toFixed(3) + ' kg/m¬≥';
            displays.pressure.textContent = Math.round(params.basePressure).toLocaleString() + ' Pa';
            
            // Actualizar etiquetas en el SVG
            document.getElementById('upperVelocity').textContent = `v = ${Math.round(upperVelocity)} m/s`;
            document.getElementById('lowerVelocity').textContent = `v = ${Math.round(lowerVelocity)} m/s`;
            document.getElementById('upperPressureText').textContent = `P = ${Math.round(upperPressure).toLocaleString()} Pa`;
            document.getElementById('lowerPressureText').textContent = `P = ${Math.round(lowerPressure).toLocaleString()} Pa`;
            document.getElementById('liftForceText').textContent = `F = ${Math.round(liftForce).toLocaleString()} N`;
            
            // Actualizar c√°lculos en el panel
            document.getElementById('calcUpperV').textContent = Math.round(upperVelocity) + ' m/s';
            document.getElementById('calcUpperKinetic').textContent = Math.round(upperKinetic).toLocaleString() + ' Pa';
            document.getElementById('calcUpperP').textContent = Math.round(upperPressure).toLocaleString() + ' Pa';
            
            document.getElementById('calcLowerV').textContent = Math.round(lowerVelocity) + ' m/s';
            document.getElementById('calcLowerKinetic').textContent = Math.round(lowerKinetic).toLocaleString() + ' Pa';
            document.getElementById('calcLowerP').textContent = Math.round(lowerPressure).toLocaleString() + ' Pa';
            
            document.getElementById('pressureDiff').textContent = Math.round(pressureDifference).toLocaleString() + ' Pa';
            document.getElementById('liftForce').textContent = Math.round(liftForce).toLocaleString() + ' N';
            
            // Actualizar visualizaci√≥n
            updateVisualization(upperVelocity, lowerVelocity, upperPressure, lowerPressure, liftForce);
            
            // Generar explicaci√≥n del cambio
            generateExplanation();
        }
        
        // Funci√≥n para actualizar la visualizaci√≥n
        function updateVisualization(upperV, lowerV, upperP, lowerP, lift) {
            // Actualizar intensidad de las zonas de presi√≥n
            const upperPressure = document.getElementById('upperPressure');
            const lowerPressure = document.getElementById('lowerPressure');
            
            // Intensidad basada en la diferencia de presi√≥n
            const maxPressureDiff = 5000; // Pa
            const pressureDiff = lowerP - upperP;
            const intensity = Math.min(0.8, pressureDiff / maxPressureDiff);
            
            upperPressure.style.fillOpacity = 0.3 + intensity * 0.5; // Rojo m√°s intenso = menos presi√≥n
            lowerPressure.style.fillOpacity = 0.3 + intensity * 0.5; // Verde m√°s intenso = m√°s presi√≥n
            
            // Actualizar flecha de sustentaci√≥n
            const liftArrow = document.getElementById('liftArrow');
            const maxLift = 10000; // N
            const arrowLength = Math.min(160, Math.max(40, (lift / maxLift) * 160));
            const arrowY = 280 - arrowLength;
            
            liftArrow.setAttribute('y2', arrowY);
            liftArrow.style.strokeWidth = Math.min(12, Math.max(4, (lift / maxLift) * 12));
            
            // Color de la flecha seg√∫n magnitud
            if (lift > 5000) {
                liftArrow.style.stroke = '#ff6b6b'; // Rojo para alta sustentaci√≥n
            } else if (lift > 2000) {
                liftArrow.style.stroke = '#ffa726'; // Naranja para media
            } else {
                liftArrow.style.stroke = '#66bb6a'; // Verde para baja
            }
            
            // Actualizar velocidad de animaci√≥n de las l√≠neas de flujo
            const upperFlowSpeed = Math.max(0.5, upperV / 50);
            const lowerFlowSpeed = Math.max(0.5, lowerV / 50);
            
            const upperFlows = document.querySelectorAll('.flow-line-upper');
            const lowerFlows = document.querySelectorAll('.flow-line-lower');
            
            upperFlows.forEach(line => {
                line.style.animationDuration = (1 / upperFlowSpeed) + 's';
            });
            
            lowerFlows.forEach(line => {
                line.style.animationDuration = (2 / lowerFlowSpeed) + 's';
            });
        }
        
        // Event listeners para sliders
        sliders.velocity.addEventListener('input', updateSimulation);
        sliders.density.addEventListener('input', updateSimulation);
        sliders.pressure.addEventListener('input', updateSimulation);
        
        // Inicializaci√≥n
        updateSimulation();
        
        // Animaci√≥n continua sutil para las zonas de presi√≥n
        function animateVisualization() {
            const time = Date.now() * 0.001;
            const oscillation = Math.sin(time * 0.5) * 3;
            
            const upperPressure = document.getElementById('upperPressure');
            const lowerPressure = document.getElementById('lowerPressure');
            
            upperPressure.setAttribute('ry', 40 + oscillation);
            lowerPressure.setAttribute('ry', 40 - oscillation);
            
            requestAnimationFrame(animateVisualization);
        }
        
        animateVisualization();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'95b8133627bdd7ef',t:'MTc1MTg5ODk5Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
